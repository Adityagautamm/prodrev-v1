{"ast":null,"code":"import * as api from '../../api/index.js';\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { useSelector } from \"react-redux\";\nimport axios from \"axios\";\nconst POSTS_URL = 'http://localhost:5000';\nconst initialState = {\n  token: 'token',\n  status: 'idle',\n  //'idle' | 'loading' | 'succeeded' | 'failed'\n  error: null\n};\nexport const signup = createAsyncThunk('/user/signin', async formData => {\n  try {\n    // const response = await axios.get(POSTS_URL)\n    const {\n      form\n    } = formData;\n    const {\n      history\n    } = formData;\n    console.log('formData:' + JSON.stringify(formData));\n    console.log('form:' + JSON.stringify(form));\n    const response = await api.signUp(form);\n    response.data.history = history;\n    return response.data;\n  } catch (error) {\n    console.log('error:' + error);\n  }\n});\nexport const authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    increment: state => {\n      state.count += 1;\n    },\n    replaceAccessToken: (state, action) => {\n      console('action' + action);\n      state.token = action.payload.token;\n    }\n  },\n\n  extraReducers(builder) {\n    builder.addCase(signup.fulfilled, (state, action) => {\n      console.log('inside builder, action:' + JSON.stringify(action)); // state.posts.push(action.payload)\n\n      state.token = JSON.stringify(action.payload.token);\n      console.log('token at Auth component: ' + state.token);\n      action.payload.history.push('/');\n    });\n  }\n\n});\nexport const getToken = state => state.auth.token;\nexport const getAuthStatus = state => state.auth.status;\nexport const getAuthError = state => state.auth.error;\nexport const {\n  increment,\n  replaceAccessToken\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["api","createSlice","createAsyncThunk","useSelector","axios","POSTS_URL","initialState","token","status","error","signup","formData","form","history","console","log","JSON","stringify","response","signUp","data","authSlice","name","reducers","increment","state","count","replaceAccessToken","action","payload","extraReducers","builder","addCase","fulfilled","push","getToken","auth","getAuthStatus","getAuthError","actions","reducer"],"sources":["C:/Users/Aditya Gautam/Desktop/curious fella/web development/React Projects/ProductReview-V1/client/src/components/Auth/authSlice.js"],"sourcesContent":["\r\nimport * as api from '../../api/index.js';\r\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport { useSelector } from \"react-redux\";\r\nimport axios from \"axios\";\r\n\r\n\r\nconst POSTS_URL = 'http://localhost:5000';\r\n\r\nconst initialState = {\r\n    token: 'token',\r\n    status: 'idle', //'idle' | 'loading' | 'succeeded' | 'failed'\r\n    error: null\r\n}\r\n\r\nexport const signup = createAsyncThunk('/user/signin', async (formData) => {\r\n    try {\r\n        // const response = await axios.get(POSTS_URL)\r\n        const { form } = formData\r\n        const { history } = formData\r\n\r\n        console.log('formData:' + JSON.stringify(formData))\r\n        console.log('form:' + JSON.stringify(form))\r\n        const response = await api.signUp(form)\r\n        response.data.history = history;\r\n\r\n        return response.data\r\n    }\r\n    catch (error) {\r\n        console.log('error:' + error);\r\n    }\r\n\r\n})\r\n\r\nexport const authSlice = createSlice({\r\n    name: 'auth',\r\n    initialState,\r\n    reducers: {\r\n        increment: (state) => {\r\n            state.count += 1;\r\n        },\r\n        replaceAccessToken: (state, action) => {\r\n            console('action' + action)\r\n            state.token = action.payload.token;\r\n        },\r\n    },\r\n    extraReducers(builder) {\r\n        builder\r\n            .addCase(signup.fulfilled, (state, action) => {\r\n                console.log('inside builder, action:' + JSON.stringify(action));\r\n                // state.posts.push(action.payload)\r\n                state.token = JSON.stringify(action.payload.token);\r\n                console.log('token at Auth component: ' + state.token)\r\n                action.payload.history.push('/')\r\n\r\n            })\r\n    }\r\n});\r\n\r\nexport const getToken = (state) => state.auth.token;\r\nexport const getAuthStatus = (state) => state.auth.status;\r\nexport const getAuthError = (state) => state.auth.error;\r\nexport const { increment, replaceAccessToken } = authSlice.actions;\r\n\r\nexport default authSlice.reducer;"],"mappings":"AACA,OAAO,KAAKA,GAAZ,MAAqB,oBAArB;AACA,SAASC,WAAT,EAAsBC,gBAAtB,QAA8C,kBAA9C;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAGA,MAAMC,SAAS,GAAG,uBAAlB;AAEA,MAAMC,YAAY,GAAG;EACjBC,KAAK,EAAE,OADU;EAEjBC,MAAM,EAAE,MAFS;EAED;EAChBC,KAAK,EAAE;AAHU,CAArB;AAMA,OAAO,MAAMC,MAAM,GAAGR,gBAAgB,CAAC,cAAD,EAAiB,MAAOS,QAAP,IAAoB;EACvE,IAAI;IACA;IACA,MAAM;MAAEC;IAAF,IAAWD,QAAjB;IACA,MAAM;MAAEE;IAAF,IAAcF,QAApB;IAEAG,OAAO,CAACC,GAAR,CAAY,cAAcC,IAAI,CAACC,SAAL,CAAeN,QAAf,CAA1B;IACAG,OAAO,CAACC,GAAR,CAAY,UAAUC,IAAI,CAACC,SAAL,CAAeL,IAAf,CAAtB;IACA,MAAMM,QAAQ,GAAG,MAAMlB,GAAG,CAACmB,MAAJ,CAAWP,IAAX,CAAvB;IACAM,QAAQ,CAACE,IAAT,CAAcP,OAAd,GAAwBA,OAAxB;IAEA,OAAOK,QAAQ,CAACE,IAAhB;EACH,CAXD,CAYA,OAAOX,KAAP,EAAc;IACVK,OAAO,CAACC,GAAR,CAAY,WAAWN,KAAvB;EACH;AAEJ,CAjBqC,CAA/B;AAmBP,OAAO,MAAMY,SAAS,GAAGpB,WAAW,CAAC;EACjCqB,IAAI,EAAE,MAD2B;EAEjChB,YAFiC;EAGjCiB,QAAQ,EAAE;IACNC,SAAS,EAAGC,KAAD,IAAW;MAClBA,KAAK,CAACC,KAAN,IAAe,CAAf;IACH,CAHK;IAINC,kBAAkB,EAAE,CAACF,KAAD,EAAQG,MAAR,KAAmB;MACnCd,OAAO,CAAC,WAAWc,MAAZ,CAAP;MACAH,KAAK,CAAClB,KAAN,GAAcqB,MAAM,CAACC,OAAP,CAAetB,KAA7B;IACH;EAPK,CAHuB;;EAYjCuB,aAAa,CAACC,OAAD,EAAU;IACnBA,OAAO,CACFC,OADL,CACatB,MAAM,CAACuB,SADpB,EAC+B,CAACR,KAAD,EAAQG,MAAR,KAAmB;MAC1Cd,OAAO,CAACC,GAAR,CAAY,4BAA4BC,IAAI,CAACC,SAAL,CAAeW,MAAf,CAAxC,EAD0C,CAE1C;;MACAH,KAAK,CAAClB,KAAN,GAAcS,IAAI,CAACC,SAAL,CAAeW,MAAM,CAACC,OAAP,CAAetB,KAA9B,CAAd;MACAO,OAAO,CAACC,GAAR,CAAY,8BAA8BU,KAAK,CAAClB,KAAhD;MACAqB,MAAM,CAACC,OAAP,CAAehB,OAAf,CAAuBqB,IAAvB,CAA4B,GAA5B;IAEH,CARL;EASH;;AAtBgC,CAAD,CAA7B;AAyBP,OAAO,MAAMC,QAAQ,GAAIV,KAAD,IAAWA,KAAK,CAACW,IAAN,CAAW7B,KAAvC;AACP,OAAO,MAAM8B,aAAa,GAAIZ,KAAD,IAAWA,KAAK,CAACW,IAAN,CAAW5B,MAA5C;AACP,OAAO,MAAM8B,YAAY,GAAIb,KAAD,IAAWA,KAAK,CAACW,IAAN,CAAW3B,KAA3C;AACP,OAAO,MAAM;EAAEe,SAAF;EAAaG;AAAb,IAAoCN,SAAS,CAACkB,OAApD;AAEP,eAAelB,SAAS,CAACmB,OAAzB"},"metadata":{},"sourceType":"module"}