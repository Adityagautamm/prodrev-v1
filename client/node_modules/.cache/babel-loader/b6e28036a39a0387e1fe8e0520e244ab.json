{"ast":null,"code":"import signUp from \"../../api/index.js\";\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { useSelector } from \"react-redux\";\nimport axios from \"axios\";\nconst POSTS_URL = 'http://localhost:5000';\nconst initialState = {\n  token: 'token',\n  status: 'idle',\n  //'idle' | 'loading' | 'succeeded' | 'failed'\n  error: null\n};\nexport const signup = createAsyncThunk('/user/signup', async formData => {\n  try {\n    // const response = await axios.get(POSTS_URL)\n    const {\n      form\n    } = formData;\n    const {\n      history\n    } = formData;\n    console.log('formData:' + JSON.stringify(formData));\n    console.log('form:' + JSON.stringify(form));\n    const response = await signUp(form); // sending history object to use once all set and done to move to next page\n\n    response.data.history = history;\n    return response.data;\n  } catch (error) {\n    console.log('error:' + error);\n  }\n});\nexport const signin = createAsyncThunk('/user/signin', async formData => {\n  try {\n    const {\n      form\n    } = formData;\n    const {\n      history\n    } = formData;\n    console.log('form:' + JSON.stringify(form));\n    const response = await api.signIn(form); // sending history object to use once all set and done to move to next page\n\n    response.data.history = history;\n    return response.data;\n  } catch (error) {\n    console.log('error:' + error);\n  }\n});\nexport const authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    increment: state => {\n      state.count += 1;\n    },\n    replaceAccessToken: (state, action) => {\n      console('action' + action);\n      state.token = action.payload.token;\n    }\n  },\n\n  extraReducers(builder) {\n    builder.addCase(signup.fulfilled, (state, action) => {\n      console.log('inside builder, signin action:' + JSON.stringify(action)); // state.posts.push(action.payload)\n\n      state.token = JSON.stringify(action.payload.token);\n      console.log('token at Auth component: ' + state.token);\n      action.payload.history.push('/');\n    }).addCase(signin.fulfilled, (state, action) => {\n      console.log('inside builder signin, action:' + JSON.stringify(action)); // state.posts.push(action.payload)\n\n      state.token = JSON.stringify(action.payload.token);\n      console.log('token at Auth component: ' + state.token);\n      action.payload.history.push('/');\n    });\n  }\n\n});\nexport const getToken = state => state.auth.token;\nexport const getAuthStatus = state => state.auth.status;\nexport const getAuthError = state => state.auth.error;\nexport const {\n  increment,\n  replaceAccessToken\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["signUp","createSlice","createAsyncThunk","useSelector","axios","POSTS_URL","initialState","token","status","error","signup","formData","form","history","console","log","JSON","stringify","response","data","signin","api","signIn","authSlice","name","reducers","increment","state","count","replaceAccessToken","action","payload","extraReducers","builder","addCase","fulfilled","push","getToken","auth","getAuthStatus","getAuthError","actions","reducer"],"sources":["C:/Users/Aditya Gautam/Desktop/curious fella/web development/React Projects/ProductReview-V1/client/src/components/Auth/authSlice.js"],"sourcesContent":["\r\nimport signUp from \"../../api/index.js\";\r\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport { useSelector } from \"react-redux\";\r\nimport axios from \"axios\";\r\n\r\n\r\nconst POSTS_URL = 'http://localhost:5000';\r\n\r\nconst initialState = {\r\n    token: 'token',\r\n    status: 'idle', //'idle' | 'loading' | 'succeeded' | 'failed'\r\n    error: null\r\n}\r\n\r\nexport const signup = createAsyncThunk('/user/signup', async (formData) => {\r\n    try {\r\n        // const response = await axios.get(POSTS_URL)\r\n        const { form } = formData\r\n        const { history } = formData\r\n\r\n        console.log('formData:' + JSON.stringify(formData))\r\n        console.log('form:' + JSON.stringify(form))\r\n        const response = await signUp(form)\r\n        // sending history object to use once all set and done to move to next page\r\n        response.data.history = history;\r\n\r\n        return response.data\r\n    }\r\n    catch (error) {\r\n        console.log('error:' + error);\r\n    }\r\n\r\n})\r\n\r\nexport const signin = createAsyncThunk('/user/signin', async (formData) => {\r\n    try {\r\n        const { form } = formData\r\n        const { history } = formData\r\n        console.log('form:' + JSON.stringify(form))\r\n        const response = await api.signIn(form)\r\n        // sending history object to use once all set and done to move to next page\r\n        response.data.history = history;\r\n\r\n        return response.data\r\n    }\r\n    catch (error) {\r\n        console.log('error:' + error);\r\n    }\r\n\r\n})\r\n\r\nexport const authSlice = createSlice({\r\n    name: 'auth',\r\n    initialState,\r\n    reducers: {\r\n        increment: (state) => {\r\n            state.count += 1;\r\n        },\r\n        replaceAccessToken: (state, action) => {\r\n            console('action' + action)\r\n            state.token = action.payload.token;\r\n        },\r\n    },\r\n    extraReducers(builder) {\r\n        builder\r\n            .addCase(signup.fulfilled, (state, action) => {\r\n                console.log('inside builder, signin action:' + JSON.stringify(action));\r\n                // state.posts.push(action.payload)\r\n                state.token = JSON.stringify(action.payload.token);\r\n                console.log('token at Auth component: ' + state.token)\r\n                action.payload.history.push('/')\r\n\r\n            })\r\n\r\n            .addCase(signin.fulfilled, (state, action) => {\r\n                console.log('inside builder signin, action:' + JSON.stringify(action));\r\n                // state.posts.push(action.payload)\r\n                state.token = JSON.stringify(action.payload.token);\r\n                console.log('token at Auth component: ' + state.token)\r\n                action.payload.history.push('/')\r\n\r\n            })\r\n    }\r\n});\r\n\r\nexport const getToken = (state) => state.auth.token;\r\nexport const getAuthStatus = (state) => state.auth.status;\r\nexport const getAuthError = (state) => state.auth.error;\r\nexport const { increment, replaceAccessToken } = authSlice.actions;\r\n\r\nexport default authSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}