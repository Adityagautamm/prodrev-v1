{"ast":null,"code":"import { signUp, signIn } from \"../../api/index.js\";\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nconst POSTS_URL = 'http://localhost:5000';\nconst initialState = {\n  token: 'token',\n  status: 'idle',\n  //'idle' | 'loading' | 'succeeded' | 'failed'\n  error: null\n};\nexport const signup = createAsyncThunk('/user/signup', async formData => {\n  try {\n    // const response = await axios.get(POSTS_URL)\n    const {\n      form\n    } = formData;\n    const {\n      history\n    } = formData;\n    console.log('formData:' + JSON.stringify(formData));\n    console.log('form:' + JSON.stringify(form));\n    const response = await signUp(form); // sending history object to use once all set and done to move to next page\n\n    response.data.history = history;\n    return response.data;\n  } catch (error) {\n    console.log('error:' + error);\n  }\n});\nexport const signin = createAsyncThunk('/user/signin', async formData => {\n  try {\n    const {\n      form\n    } = formData;\n    const {\n      history\n    } = formData;\n    console.log('form:' + JSON.stringify(form));\n    const response = await signIn(form); // sending history object to use once all set and done to move to next page\n\n    response.data.history = history;\n    return response.data;\n  } catch (error) {\n    console.log('error:' + error);\n  }\n});\nexport const authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    increment: state => {\n      state.count += 1;\n    },\n    replaceAccessToken: (state, action) => {\n      console('action' + action);\n      state.token = action.payload.token;\n    }\n  },\n\n  extraReducers(builder) {\n    builder.addCase(signup.fulfilled, (state, action) => {\n      console.log('inside builder, signin action:' + JSON.stringify(action)); // state.posts.push(action.payload)\n\n      state.token = JSON.stringify(action.payload.token);\n      console.log('token at Auth component: ' + state.token);\n    }).addCase(signin.fulfilled, (state, action) => {\n      console.log('inside builder signin, old state:' + JSON.stringify(state));\n      console.log('payload:' + action.payload.token); // state.posts.push(action.payload)\n\n      state.token = action.payload.token;\n      action.payload.history.push('/'); //console.log('inside builder signin,  new state:' + JSON.stringify(state));\n    });\n  }\n\n});\nexport const getToken = state => state.auth.token;\nexport const getAuthStatus = state => state.auth.status;\nexport const getAuthError = state => state.auth.error;\nexport const {\n  increment,\n  replaceAccessToken\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["signUp","signIn","createSlice","createAsyncThunk","POSTS_URL","initialState","token","status","error","signup","formData","form","history","console","log","JSON","stringify","response","data","signin","authSlice","name","reducers","increment","state","count","replaceAccessToken","action","payload","extraReducers","builder","addCase","fulfilled","push","getToken","auth","getAuthStatus","getAuthError","actions","reducer"],"sources":["C:/Users/Aditya Gautam/Desktop/curious fella/web development/React Projects/ProductReview-V1/client/src/components/Auth/authSlice.js"],"sourcesContent":["\r\nimport { signUp, signIn } from \"../../api/index.js\";\r\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\n\r\n\r\n\r\nconst POSTS_URL = 'http://localhost:5000';\r\n\r\nconst initialState = {\r\n    token: 'token',\r\n    status: 'idle', //'idle' | 'loading' | 'succeeded' | 'failed'\r\n    error: null\r\n}\r\n\r\nexport const signup = createAsyncThunk('/user/signup', async (formData) => {\r\n    try {\r\n        // const response = await axios.get(POSTS_URL)\r\n        const { form } = formData\r\n        const { history } = formData\r\n\r\n        console.log('formData:' + JSON.stringify(formData))\r\n        console.log('form:' + JSON.stringify(form))\r\n        const response = await signUp(form)\r\n        // sending history object to use once all set and done to move to next page\r\n        response.data.history = history;\r\n\r\n        return response.data\r\n    }\r\n    catch (error) {\r\n        console.log('error:' + error);\r\n    }\r\n\r\n})\r\n\r\nexport const signin = createAsyncThunk('/user/signin', async (formData) => {\r\n    try {\r\n        const { form } = formData\r\n        const { history } = formData\r\n        console.log('form:' + JSON.stringify(form))\r\n        const response = await signIn(form)\r\n        // sending history object to use once all set and done to move to next page\r\n        response.data.history = history;\r\n\r\n        return response.data\r\n    }\r\n    catch (error) {\r\n        console.log('error:' + error);\r\n    }\r\n\r\n})\r\n\r\nexport const authSlice = createSlice({\r\n    name: 'auth',\r\n    initialState,\r\n    reducers: {\r\n        increment: (state) => {\r\n            state.count += 1;\r\n        },\r\n        replaceAccessToken: (state, action) => {\r\n            console('action' + action)\r\n            state.token = action.payload.token;\r\n        },\r\n    },\r\n    extraReducers(builder) {\r\n        builder\r\n            .addCase(signup.fulfilled, (state, action) => {\r\n                console.log('inside builder, signin action:' + JSON.stringify(action));\r\n                // state.posts.push(action.payload)\r\n                state.token = JSON.stringify(action.payload.token);\r\n                console.log('token at Auth component: ' + state.token)\r\n\r\n\r\n            })\r\n\r\n            .addCase(signin.fulfilled, (state, action) => {\r\n                console.log('inside builder signin, old state:' + JSON.stringify(state));\r\n                console.log('payload:' + action.payload.token)\r\n                // state.posts.push(action.payload)\r\n                state.token = action.payload.token;\r\n\r\n                action.payload.history.push('/')\r\n                //console.log('inside builder signin,  new state:' + JSON.stringify(state));\r\n            })\r\n    }\r\n});\r\n\r\nexport const getToken = (state) => state.auth.token;\r\nexport const getAuthStatus = (state) => state.auth.status;\r\nexport const getAuthError = (state) => state.auth.error;\r\nexport const { increment, replaceAccessToken } = authSlice.actions;\r\n\r\nexport default authSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}